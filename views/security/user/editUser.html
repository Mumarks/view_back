<!DOCTYPE html>

<html>

	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../../../layuiadmin/layui/css/layui.css" media="all">
		<link rel="stylesheet" href="../../../layuiadmin/modules/formSelect/formSelects-v4.css" media="all"/>
	</head>

	<body>
		<input type="hidden" id="roles" />
		<div class="layui-form" lay-filter="security_form_user" id="security_form_user" style="padding: 20px 30px 0 0;">
			<div class="layui-form-item">
				<label class="layui-form-label">账号</label>
				<div class="layui-input-block">
					<input type="text" name="username" readonly lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">昵称</label>
				<div class="layui-input-block">
					<input type="text" name="nickName" lay-verify="required" placeholder="请输入" autocomplete="off" class="layui-input">
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">角色</label>
				<div class="layui-input-block">
					<select name="roles" xm-select="roleSelect" xm-select-radio lay-verify="required" xm-select-skin="primary" xm-select-search>
				    </select>
				</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">启用</label>
				<div class="layui-input-block">
						<input type="radio" name="isAvailable" value="0" title="启用" checked>
						<input type="radio" name="isAvailable" value="1" title="不启用">
				</div>
			</div>
			<div class="layui-form-item layui-hide">
				<button class="layui-btn" lay-submit lay-filter="security_submit_user" id="security_submit_user">提交</button>
			</div>
		</div>

		<script src="../../../layuiadmin/layui/layui.js"></script>
		<script>
			layui.config({
				base: '../../../layuiadmin/' //静态资源所在路径
			}).extend({
				index: 'lib/index', //主入口模块
				formSelects: 'formSelect/formSelects-v4.min'
			}).use(['index', 'formSelects', 'form'], function() {
				var $ = layui.$,
					form = layui.form,
					formSelects = layui.formSelects;
					
				layui.formSelects.data('roleSelect', 'server', {
		            url: layui.setter.domian + '/account/getRoleByOrganization?token=' + localStorage.getItem("token"),
		            beforeSuccess: function(id, url, searchVal, result){
		               	//我要把数据外层的code, msg, data去掉
		                result = result.data;
		                var data = [];
		                for(var i = 0; i < result.length; i++){
		                	data[data.length] = {
		                		name : result[i].nameCn,
		                		value : result[i].roleCode
		                	}
		                }
		                //然后返回数据
		                return data;
		            },
		            success: function(id, url, searchVal, result){
		            	formSelects.value("roleSelect", $("#roles").val().split(","));
		            }
		        });
			})
		</script>
	</body>

</html>