define(["Libras","../others/Graphics","../widgets/PopupTemplate/PopupTemplate","../_Map","../widgets/Navigation/viewerNavigationMixin","../widgets/Geocoder/Geocoder"],function(e,a,r,t,n,o){return function(i){e.defined(i.container)||new Error("container is required"),i.animation=e.defaultValue(i.animation,!1),i.baseLayerPicker=e.defaultValue(i.baseLayerPicker,!1),i.fullscreenButton=e.defaultValue(i.fullscreenButton,!1),i.geocoder=e.defaultValue(!1),i.homeButton=e.defaultValue(i.homeButton,!1),i.infoBox=e.defaultValue(i.infoBox,!1),i.sceneModePicker=e.defaultValue(i.sceneModePicker,!1),i.selectionIndicator=e.defaultValue(i.selectionIndicator,!1),i.timeline=e.defaultValue(i.timeline,!1),i.navigationHelpButton=e.defaultValue(i.navigationHelpButton,!1),i.navigationInstructionsInitiallyVisible=e.defaultValue(i.navigationInstructionsInitiallyVisible,!1),i.showRenderLoopErrors=e.defaultValue(i.showRenderLoopErrors,!1),i.scene3DOnly=e.defaultValue(i.scene3DOnly,!0),i.requestRenderMode=e.defaultValue(i.requestRenderMode,!0),i.fullscreenElement=e.defaultValue(i.fullscreenElement,document.body),i.imageryProvider=new e.GridImageryProvider({cells:14,glowColor:e.Color.WHITE,glowWidth:.5,color:e.Color.fromCssColorString("#fffbf4"),backgroundColor:e.Color.fromCssColorString("#e5dfd3")});var l=this;this.__proto__=e.Viewer.prototype,e.Viewer.call(l,i.container,i),this._bottomContainer.remove(),l.scene.screenSpaceCameraController.minimumZoomDistance=100,l.scene.screenSpaceCameraController.maximumZoomDistance=22e6,i.geocoder=i.search;var s;if(e.defined(i.geocoder)&&!1!==i.geocoder.enabled&&e.defined(i.geocoder.params)&&i.geocoder.params.length>0){var c=new e.EventHelper,d=document.createElement("div");d.className="libras-viewer-toolbar",l._element.appendChild(d);var u=document.createElement("div");u.className="libras-viewer-geocoderContainer",d.appendChild(u),s=new o({container:u,geocoderServices:i.geocoder.params,scene:l.scene}),c.add(s.viewModel.search.beforeExecute,e.Viewer.prototype._clearObjects,this),this._geocoder=s}e.defined(i.baseMap)?this.imageryLayers.addImageryProvider(i.baseMap):this.imageryLayers.addImageryProvider(new e.UrlTemplateImageryProvider({url:"http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&x={x}&y={y}&z={z}&s=Gali"})),this.scene.screenSpaceCameraController.zoomEventTypes=[e.CameraEventType.WHEEL,e.CameraEventType.MIDDLE_DRAG,e.CameraEventType.PINCH],this.scene.screenSpaceCameraController.tiltEventTypes=[e.CameraEventType.RIGHT_DRAG],this.librasWidget.screenSpaceEventHandler.removeInputAction(e.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),this.graphics=new a,this.map=new t(l),this.popupTemplate=new r({viewer:l}),this.camera.setView({destination:e.Cartesian3.fromDegrees(i.center&&i.center[0]||110,i.center&&i.center[1]||33,i.center&&i.center[2]||1e7)}),this.goTo=function(a){l.camera.flyTo({destination:e.Cartesian3.fromDegrees(a.center[0],a.center[1],a.center[2]),orientation:{heading:e.Math.toRadians(e.defaultValue(a.heading,0)),pitch:e.Math.toRadians(e.defaultValue(a.pitch,-90)),roll:e.Math.toRadians(e.defaultValue(a.roll,0))},duration:a.duration||3,complete:a.complete})};var m={};m.defaultResetView=e.Rectangle.fromDegrees(90,17,130,45),m.enableCompass=!0,m.enableZoomControls=!0,m.enableDistanceLegend=!0,m.enableCompassOuterRing=!0,this.extend(n,m)}});