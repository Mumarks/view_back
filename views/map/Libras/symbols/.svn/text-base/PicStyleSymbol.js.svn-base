define(["Libras"],function(t){"use strict";t.buildModuleUrl;var e=t.Color,r=t.defined,n=t.DeveloperError,o=t.Resource;t.writeTextToCanvas;function i(t){this._cache={}}i.prototype.fromUrl=function(t,e){if(!r(t))throw new n("url is required");if(!r(e))throw new n("size is required");return h(t,void 0,e,this._cache)},i.prototype.fromText=function(t,e,o,i){if(!r(t))throw new n("text is required");if(!r(e))throw new n("size is required");return h(void 0,t,e,this._cache,o,i)};new e;var a=new Array(4);function h(t,e,n,i,h,l){a[0]=t,a[1]=e,a[2]=n;var d=JSON.stringify(a),u=i[d];if(r(u))return u;var f=document.createElement("canvas");f.width=n,f.height=n;var M=f.getContext("2d");if(r(t)){!function(t,e){t.strokeStyle="#fff";var r=e/2,n=Math.round(5*e/6);t.beginPath(),t.moveTo(r,n),t.arc(r,n,3*e/20,0,2*Math.PI,!1),t.fillStyle="rgba(3, 252, 249,0.2)",t.fill(),t.beginPath(),t.arc(r,n,e/12,0,2*Math.PI,!1),t.fillStyle="rgb(3, 252, 249)",t.lineWidth=Math.round(e/75),t.fill(),t.stroke(),t.beginPath(),t.moveTo(Math.round(9*e/20),Math.round(7*e/12)),t.lineTo(Math.round(11*e/20),Math.round(7*e/12)),t.lineTo(Math.round(e/2),Math.round(19*e/30)),t.closePath(),t.fillStyle="#fff",t.fill(),t.beginPath();var o=Math.round(e/2),i=Math.round(e/3);t.arc(o,i,Math.round(4*e/15),0,2*Math.PI,!1),t.clip(),t.lineWidth=Math.round(e/30),t.stroke()}(M,n);var c=new o.createIfNeeded(t).fetchImage({preferBlob:!0}).then(function(t){return console.log(t),function(t,e,r){var n,o,i=Math.round(4*r/15);e.width>e.height?(n=2*i,o=e.width/e.height*n):(o=2*i,n=e.height/e.width*o);var a=Math.round(r/2),h=Math.round(r/3),l=Math.round(a-o/2),d=Math.round(h-n/2);t.drawImage(e,l,d,o,n)}(M,t,n),i[d]=f,f});return i[d]=c,c}return r(e)&&(console.log(arguments),l?function(t,e,r,n){r/=2,t.fillStyle=n||"red",t.arc(r,r,r,0,2*Math.PI,!1),t.fill(),t.fillStyle="#fff",t.font=r+"px Microsoft Yahei",t.textAlign="center",t.textBaseline="middle",t.fillText(e,r,r)}(M,e,n,h):function(t,e,r){t.strokeStyle="red",t.lineWidth=Math.round(r/75),t.moveTo(Math.round(r/2),Math.round(.9*r)),t.lineTo(Math.round(r/2),Math.round(.1*r)),t.stroke(),t.lineTo(Math.round(r),Math.round(.4*r)),t.lineTo(Math.round(r/2),Math.round(.4*r)),t.fillStyle="red",t.fill(),t.fillStyle="#fff",t.font=r/10+"px serif",t.fillText(e,Math.round(.54*r),Math.round(.33*r))}(M,e,n)),i[d]=f,f}return i});