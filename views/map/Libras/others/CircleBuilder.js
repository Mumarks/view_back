define(["Libras"],function(e){"use strict";var r=e.buildModuleUrl,t=e.Color,i=e.defined,o=e.DeveloperError,n=e.Resource,a=e.writeTextToCanvas;function s(){this._cache={}}s.prototype.fromColor=function(e,r){if(!i(e))throw new o("color is required");if(!i(r))throw new o("size is required");return u(void 0,void 0,e,r,this._cache)},s.prototype.fromUrl=function(e,r,t){if(!i(e))throw new o("url is required");if(!i(r))throw new o("color is required");if(!i(t))throw new o("size is required");return u(e,void 0,r,t,this._cache)},s.prototype.fromMakiIconId=function(e,t,n){if(!i(e))throw new o("id is required");if(!i(t))throw new o("color is required");if(!i(n))throw new o("size is required");return u(r("Assets/Textures/maki/"+encodeURIComponent(e)+".png"),void 0,t,n,this._cache)},s.prototype.fromText=function(e,r,t){if(!i(e))throw new o("text is required");if(!i(r))throw new o("color is required");if(!i(t))throw new o("size is required");return u(void 0,e,r,t,this._cache)};var h=new t;function d(e,r,i){var o=i/2,n=o,a=o;r.width>r.height?a=o*(r.height/r.width):r.width<r.height&&(n=o*(r.width/r.height)),a+=5;var s=Math.round((i-n)/2),h=Math.round(7/24*i-a/2)+10;e.globalCompositeOperation="destination-out",e.drawImage(r,s-1,h,n,a),e.drawImage(r,s,h-1,n,a),e.drawImage(r,s+1,h,n,a),e.drawImage(r,s,h+1,n,a),e.globalCompositeOperation="destination-over",e.fillStyle=t.BLACK.toCssColorString(),e.fillRect(s-1,h-1,n+2,a+2),e.globalCompositeOperation="destination-out",e.drawImage(r,s,h,n,a),e.globalCompositeOperation="destination-over",e.fillStyle=t.WHITE.toCssColorString(),e.fillRect(s-1,h-2,n+2,a+2)}var l=new Array(4);function u(e,r,t,o,s){l[0]=e,l[1]=r,l[2]=t,l[3]=o;var u=JSON.stringify(l),f=s[u];if(i(f))return f;var c=document.createElement("canvas");c.width=o,c.height=o;var w=c.getContext("2d");if(function(e,r,t){e.save(),e.fillStyle=r.toCssColorString(),e.strokeStyle=r.brighten(.6,h).toCssColorString();var i=e.canvas,o=i.width,n=i.height,a=Math.min(o,n);e.arc(o/2,n/2,a/2,0,2*Math.PI,!1),e.fill(),e.restore()}(w,t),i(e)){var g=n.createIfNeeded(e).fetchImage().then(function(e){return d(w,e,o),s[u]=c,c});return s[u]=g,g}if(i(r)){var v=a(r,{font:o+"px Arial"});d(w,v,o)}return s[u]=c,c}return s});