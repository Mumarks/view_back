define(["Libras"],function(e){var i=e.ScreenSpaceEventHandler,r=e.defined,t=e.defaultValue,n=e.ScreenSpaceEventType,a=e.DeveloperError,c=e.Math;return function(o){if(!r(o.viewer))throw new a("viewer is required");o.eventType=t(o.eventType,"LEFT_CLICK").toUpperCase();var s=o.viewer.scene,p=(o.viewer.camera,s.globe.ellipsoid),l=new i(s.canvas);return l.setInputAction(function(i){var r,t=i.endPosition||i.position;if(viewer.scene.pick(t)){if(!(a=s.pickPosition(t)))return;r=p.cartesianToCartographic(a)}else try{var n=viewer.scene.camera.getPickRay(t),a=viewer.scene.globe.pick(n,viewer.scene);if(!(r=e.Ellipsoid.WGS84.cartesianToCartographic(a)))return}catch(e){}r&&o.callBack&&o.callBack({screenPoint:t,mapPoint:{longitude:c.toDegrees(r.longitude),latitude:c.toDegrees(r.latitude),height:r.height},cartographic:r,cartesian:a})},n[o.eventType]),l}});