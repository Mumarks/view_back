define(["Libras"],function(e){var i=e.createGuid,t=e.Check,r=e.AssociativeArray,n=e.RuntimeError,s=e.Entity;function o(t){if(this._items=new r,window.viewer||t||t.viewer){var n=t&&t.viewer,s=window.viewer||n;this.id=t&&t.id||i(),this.collection=s.entities.add(new e.Entity),this.items=this._items._array,this.length=this._items.length,Object.defineProperty(this,"show",{set:function(e){this.collection.show=e},get:function(){return this.collection.show}})}else console.error("Map viewer is required")}return o.prototype.findGraphicById=function(e){return t.typeOf.string("id",e),this._items.get(e)},o.prototype.add=function(e){t.typeOf.object("graphic",e);var i=e.id,r=this._items;if(r.contains(i))throw new n("A Graphic with id "+i+" already exist in this collection");return r.set(i,e),this.viewer?(e.parent=this.collection,this.viewer.entities.add(e),this.viewer.scene.requestRender(),e):e},o.prototype.remove=function(e){if(e instanceof s)return this._items.remove(e.id),this.viewer.entities.remove(e)},o.prototype.removeAll=function(){var e=this;this.items.forEach(function(i){e.remove(i)})},o});