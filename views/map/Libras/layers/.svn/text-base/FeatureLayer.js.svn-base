define(["Libras","../_Color"],function(e,t){var o=e.GeoJsonDataSource,i=e.defined,n=(e.defaultValue,e.DeveloperError),p=e.createGuid;return function(e){if(!i(e.url))throw new n("url is required");e.definitionExpression&&(e.url+="&CQL_FILTER="+encodeURI(e.definitionExpression)),e.fill=t(e.color||"#fff").withAlpha(e.opacity||1),e.stroke=t(e.outline&&e.outline.color||"#FF0000"),e.strokeWidth=e.outline&&e.outline.width||2;var r=new o.load(e.url,e);return r.id=e.id||p(),r.featureReduction=e.featureReduction||!1,r.popupEnabled=e.popupEnabled,e.popupTemplate&&r.then(function(t){var o=t.entities._entities._array;for(var i in o)o[i].popupEnabled=e.popupEnabled,o[i].popupTemplate={title:e.popupTemplate.title,content:e.popupTemplate.content,actions:e.popupTemplate.actions}}),r}});