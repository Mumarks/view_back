define(["Libras","../_Color"],function(e,t){var i=e.Color,o=e.Cartesian3,n=e.defined,r=e.DeveloperError,a=e.JulianDate,l=e.Entity;function s(e){var s,c,d=document.createElement("canvas"),h=d.getContext("2d");d.height=4,d.width=4,h.fillStyle=e.pointStyle.color,h.arc(2,2,2,0,2*Math.PI,!1),h.fill(),s=d.toDataURL(),this.entityCollection=c=e.viewer.entities.add(new l),e.viewer.clockViewModel.shouldAnimate=!0;var m=e.points.map(function(e,t,i){return{coordinates:e,time:t}});console.log(m);var v={start:0,end:m.length},f=15,u=v.end-v.start,g=function(e){if(!n(e))throw new r("time is required.");var t=a.toDate(e).getTime()/f%u+v.start,i=i||10;return!!(t&&this.nameID>t-i&&this.nameID<t)},w=[],p=e.pointStyle,y=new i(243/255,242/255,249/255,.8),D=5;p&&(p.color&&(y=t(p.color)),p.size&&(D=p.size));for(var C=0;C<m.length;++C){var b=m[C].coordinates[0],E=m[C].coordinates[1];w[C]=e.viewer.entities.add({parent:c,position:o.fromDegrees(b,E,e.height),nameID:m[C].time,billboard:{image:s,width:D,height:D,color:y}}),w[C].isAvailable=g}}return s.prototype.destroy=function(e){this.entityCollection._children.forEach(function(t,i,o){e.entities.remove(t)}),e.entities.remove(this.entityCollection)},s});