define(["../layers/WMTSLayer","../layers/WMSLayer","../layers/ArcGisBaseLayer","../layers/ElevationLayer","Libras"],function(e,r,i,a,t){var l=t.defined,n=t.DeveloperError;return{addLayer:function(s){if(!l(s.viewer))throw new n("viewer is required");if(!l(s.type))throw new n("type is required");if(!l(s.url))throw new n("url is required");this.removeLayer(s.viewer);var y,o=s.viewer.imageryLayers;if("arcgis"==s.type)y=new i({url:s.url});else if("wmts"==s.type)y=new e({url:s.url,title:s.wmtsOptions.title,format:s.wmtsOptions.format,tileMatrixSet:s.wmtsOptions.tileMatrixSet});else if("google"==s.type)y=new t.UrlTemplateImageryProvider({url:s.url});else{if("dem"==s.type)return y=new a({url:s.url}),viewer.map.ground.layer.add(y),y;y=new r({url:s.url,layers:"0"})}return o.addImageryProvider(y,2),y},removeLayer:function(e,r){if(r instanceof a)e.scene.terrainProvider=map.ground.defaultElevationLayer;else{var i=e.imageryLayers;e.imageryLayers.remove(i.get(2))}}}});