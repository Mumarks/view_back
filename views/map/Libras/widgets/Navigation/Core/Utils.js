define(["Libras"],function(e){"use strict";var o=e.defined,r=e.Ray,i=e.Cartesian3,n=e.Cartographic,t=(e.ReferenceFrame,e.SceneMode),a={},c=new n,d=new r;return a.getCameraFocus=function(e,r,n){var a=e.scene,s=a.camera;if(a.mode!=t.MORPHING&&(o(n)||(n=new i),o(e.trackedEntity)?n=e.trackedEntity.position.getValue(e.clock.currentTime,n):(d.origin=s.positionWC,d.direction=s.directionWC,n=a.globe.pick(d,a,n)),o(n)))return a.mode==t.SCENE2D||a.mode==t.COLUMBUS_VIEW?(n=s.worldToCameraCoordinatesPoint(n,n),r&&(n=a.globe.ellipsoid.cartographicToCartesian(a.mapProjection.unproject(n,c),n))):r||(n=s.worldToCameraCoordinatesPoint(n,n)),n},a});