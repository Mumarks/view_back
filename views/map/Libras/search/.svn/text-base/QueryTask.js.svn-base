define(["Libras"],function(e){var r=e.GeoJsonDataSource,t=e.defined,o=e.combine,n=e.freezeObject,i=e.Uri,u=e.objectToQuery,s=e.queryToObject,a=e.defaultValue,p=e.DeveloperError,l=n({service:"WFS",version:"1.0.0",request:"GetFeature",outputFormat:"application/json"});function c(e){if(!t(e.url))throw new p("url is required");if(!t(e.layer))throw new p("layer is required");this.options=e}return c.prototype.execute=function(e){var n=new i(this.options.url),p=s(a(n.query,""));p=o(l,p);function c(e,r){t(p[e])||(p[e]=r)}t(this.options.maxFeatures)&&(p.maxFeatures=this.options.maxFeatures),c("typeName",this.options.layer),e.where&&c("CQL_FILTER",e.where),n.query=u(p);var f=n.toString();this.getUrl=function(){return f};e.outFields;return new r.load(f,this.options)},c.prototype.insidePolygon=function(e,r){for(var t=r[0],o=r[1],n=!1,i=0,u=e.length-1;i<e.length;u=i++){var s=e[i][0],a=e[i][1],p=e[u][0],l=e[u][1];a>o!=l>o&&t<(p-s)*(o-a)/(l-a)+s&&(n=!n)}return n},c.prototype.pointInsideCircle=function(e,r,t){if(0===t)return!1;var o=r[0]-e[0],n=r[1]-e[1];return o*o+n*n<=t*t},c});