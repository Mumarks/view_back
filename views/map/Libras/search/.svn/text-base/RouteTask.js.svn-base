define(["Libras","./RouteParameters"],function(r,e){var t=r.defaultValue,u=r.defined,i=r.Resource,n=r.Uri,a=r.objectToQuery,o=r.queryToObject,l=r.DeveloperError,s=function(r){if(!u(r.url))throw new l("url is required");if(!u(r.layer))throw new l("layer is required");this._url=r.url,this._layer=r.layer};return s.prototype.solve=function(r){if(!r instanceof e)throw new l("parameters must be RouteParameters");var s=r.getStart(),y=r.getEnd(),f=new n(this._url);f.path=f.getPath()+"/"+this._layer;var h=o(t(f.query,""));function c(r,e){u(h[r])||(h[r]=e)}c("x1",s.x),c("y1",s.y),c("x2",y.x),c("y2",y.y),f.query=a(h);var d=f.toString();return this._url=d,i.fetchJson({url:d})},s.getUrl=function(){return this._url},s});